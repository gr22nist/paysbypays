# PaysByPays Dashboard

> **결제대행사 대시보드 애플리케이션**  
> Next.js 16.0.3 + React 19.2.0 + TypeScript 5.x 기반의 현대적인 대시보드 솔루션

[![Next.js](https://img.shields.io/badge/Next.js-16.0.3-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.2.0-blue)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)](https://www.typescriptlang.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind%20CSS-4.x-38bdf8)](https://tailwindcss.com/)

---

## 📋 목차

- [개요](#개요)
- [주요 기능](#주요-기능)
- [기술 스택](#기술-스택)
- [시작하기](#시작하기)
- [프로젝트 구조](#프로젝트-구조)
- [주요 페이지](#주요-페이지)
- [개발 현황](#개발-현황)
- [문서](#문서)
- [라이선스](#라이선스)

---

## 개요

PaysByPays Dashboard는 결제대행사 운영팀을 위한 종합 대시보드 애플리케이션입니다. 거래 내역, 가맹점 관리, 정산, 분석, 시스템 모니터링 등 결제대행사 운영에 필요한 모든 기능을 제공합니다.

### 주요 특징

- **현대적인 UI/UX**: 다크 모드, 반응형 디자인, 접근성 기능
- **다국어 지원**: 한국어, 영어, 일본어 (33개 파일에서 사용)
- **데이터 시각화**: Recharts를 활용한 다양한 차트 (트렌드, 타임라인, 통계)
- **실시간 모니터링**: 시스템 상태 체크 및 자동 갱신 (30초 간격)
- **실시간 알림**: 시스템 지연, 실패율, 정산 지연 알림 (AlertBanner)
- **데이터 내보내기**: Excel/CSV 형식으로 데이터 내보내기
- **모듈화된 구조**: 50+ 개의 재사용 가능한 컴포넌트
- **타입 안전성**: TypeScript로 엄격한 타입 체크

---

## 주요 기능

### 1. 대시보드 홈 (`/`)
- **통계 요약 패널**: 총 거래 금액, 거래 건수, 승인률, 평균 거래 금액
- **거래 트렌드 차트**: 시간대별 승인/실패 거래 추이 시각화
- **최다 거래 가맹점 TOP 5**: 거래 금액/승인 건수 기준 상위 가맹점
- **최근 거래 내역**: 최근 5건 거래 내역 테이블
- **시스템 상태 카드**: 주요 API 그룹 상태 모니터링 (자동 갱신 30초)
- **정산 알림 카드**: 지급 예정/지연 정산 건수 표시
- **가맹점 상태 요약**: 활성/비활성 가맹점 수

### 2. 거래 내역 관리 (`/transactions`)
- **통계 패널**: 필터 적용 시 자동 업데이트되는 통계
- **고급 필터링**: 
  - 거래 상태 (SUCCESS, FAILED, CANCELLED, PENDING)
  - 결제 수단 (휴대폰, 온라인, 단말기, 가상계좌, 정기결제 등)
  - 날짜 범위 (오늘, 지난 7일, 이번 달, 지난 달, 전체)
  - 가맹점 코드 (URL 파라미터 지원)
- **정렬 및 페이징**: 컬럼별 정렬, 페이지 크기 선택 (10/25/50/100)
- **거래 상세 Drawer**: 거래 기본 정보, 가맹점 정보, 관련 링크
- **데이터 내보내기**: Excel/CSV 형식으로 필터링된 데이터 내보내기

### 3. 가맹점 관리 (`/merchants`)
- **가맹점 목록**: 검색, 상태 필터, 정렬, 페이징
- **가맹점 상세** (`/merchants/[mchtCode]`):
  - 통계 패널 (해당 가맹점의 거래 통계)
  - 기본 정보 카드 (코드, 이름, 상태, 사업자 유형)
  - 연락처 정보 카드 (사업자 등록번호, 주소, 전화번호, 이메일)
  - 가맹점별 거래 내역 테이블 (자동 필터링)
- **가맹점 등록** (`/merchants/new`): 
  - 폼 기반 등록 (Mock 구현)
  - 클라이언트 측 유효성 검사
  - 등록 완료 후 자동 이동

### 4. 정산 관리 (`/settlements`)
- **정산 통계 패널**: 총 정산 금액, 지급 금액, 지급 예정/완료/지연 건수
- **정산 타임라인 차트**: 월별 정산 금액 추이 (예정/완료 구분)
- **빠른 액션 카드**: 지급 예정/지연/전체 정산 보기
- **정산 내역 테이블**: 정산 ID, 가맹점, 기간, 금액, 수수료, 지급 상태, 지급 예정일
- **데이터 병합**: 실제 거래 데이터와 Mock 데이터 자동 병합
- **자동 상태 업데이트**: 지급 예정일이 과거인 경우 자동으로 완료 상태로 변경

### 5. 분석 및 통계 (`/analytics`)
- **통계 패널**: 총 거래 금액, 거래 건수, 승인률, 평균 거래 금액
- **평균 거래 금액 카드**: 전일 대비 변화율 표시
- **거래 트렌드 차트**: 시간대별 거래 추이 (승인/실패 구분)
- **승인률 차트**: 시간대별 승인률 추이
- **결제 수단별 통계**: 결제 수단별 거래 금액/건수 (바 차트)
- **상위 가맹점 테이블**: 거래 금액/건수 기준 상위 10개 가맹점
- **상태 분포 패널**: 거래 상태별 분포 (파이 차트)

### 6. 시스템 모니터링 (`/system-health`)
- **전체 상태 요약**: 정상/지연/오류 그룹 수, 마지막 업데이트 시각
- **서비스 그룹 상태 테이블**: 
  - 거래 API, 가맹점 API, 공통 코드 API, API Proxy 그룹별 상태
  - 응답 시간 (ms), 마지막 확인 시각, 오류 메시지
- **최근 상태 로그**: 최근 8개 스냅샷 표시 (전체 상태 및 그룹별 상태)
- **자동 폴링**: 30초 간격 자동 헬스 체크
- **수동 새로고침**: 즉시 상태 확인 가능
- **가시성 복귀 시 자동 새로고침**: 탭 전환 시 자동 업데이트

### 7. 실시간 알림 시스템
- **AlertBanner 컴포넌트**: 화면 우측 상단 플로팅 알림
- **알림 유형**:
  - 시스템 오류: API 그룹이 응답하지 않을 때
  - 시스템 지연: API 응답 지연 감지 시
  - 높은 실패율: 오늘 거래 실패율이 10% 초과 시
  - 중간 실패율: 오늘 거래 실패율이 5% 초과 시
  - 정산 지연: 지연된 정산 건이 있을 때
- **알림 기능**:
  - 즉시 닫기
  - 1일간 숨기기 (localStorage 저장)
  - 클릭 시 관련 페이지로 이동

### 8. 사용자 설정 (`/settings`)
- **테마 설정**: 라이트/다크/시스템 설정, 폰트 크기 조절
- **언어 및 지역 설정**: 
  - 언어 선택 (한국어/영어/일본어)
  - 날짜 형식 (YYYY-MM-DD, YYYY/MM/DD, MM/DD/YYYY)
  - 통화 (KRW/USD/JPY)
  - 언어 변경 시 통화 자동 매핑
- **접근성 옵션**: 고대비 모드, 감소된 모션
- **실시간 미리보기**: 설정 변경 시 즉시 미리보기
- **상태 영속성**: localStorage에 자동 저장/복원

### 9. 로그아웃 기능
- 사이드바 하단 로그아웃 버튼
- 확인 모달 (ConfirmModal 사용)
- 장식용 기능 (실제 로그아웃 로직은 미구현)

---

## 기술 스택

### 핵심 프레임워크
- **Next.js 16.0.3** (App Router)
- **React 19.2.0**
- **React DOM 19.2.0**
- **TypeScript 5.x** (^5)

### 스타일링
- **Tailwind CSS 4.x** (^4)
- **Pretendard 1.3.9** (^1.3.9)

### 상태 관리
- **Zustand 5.0.8**
  - `preferences-store`: 사용자 설정 (테마, 언어, 통화, 날짜 형식, 접근성)
  - `filter-store`: 전역 필터 상태 (거래 상태, 결제 수단, 날짜 범위)
  - `health-store`: 시스템 헬스 모니터링 상태
  - `ui-store`: UI 상태 (사이드바 접기/펼치기)

### 데이터 시각화
- **Recharts 3.5.0**
  - 거래 트렌드 차트
  - 정산 타임라인 차트
  - 결제 수단별 통계 차트
  - 승인률 차트
  - 상태 분포 파이 차트

### 국제화
- **@hua-labs/i18n-core** (로컬 패키지, 자체 개발)
  - 다국어 지원 (한국어, 영어, 일본어)
  - 네임스페이스 기반 번역 관리
  - 동적 번역 로딩
  - 33개 파일에서 사용
  - 자세한 내용은 [PACKAGES.md](./docs/PACKAGES.md) 참조

### UI 컴포넌트
- **@hua-labs/ui** (로컬 패키지, 자체 개발)
  - 재사용 가능한 UI 컴포넌트 라이브러리
  - `StatsPanel`, `Pagination`, `Drawer`, `Icon`, `Skeleton`, `ConfirmModal` 등
  - 43개 파일에서 사용
  - 자세한 내용은 [PACKAGES.md](./docs/PACKAGES.md) 참조

### 기타
- **exceljs 4.4.0** (Excel 내보내기)

---

## 시작하기

### 필수 요구사항

- **Node.js 20.x LTS** (필수)
  - 예: 20.11.0, 20.15.0 등
  - Node 18 이하 또는 Node 22 이상 버전 사용 시 문제가 발생할 수 있습니다.
- **패키지 매니저**: npm

### 설치

```bash
# 의존성 설치
npm install
```

### 환경 변수 설정

`.env.example` 파일을 참조하여 `.env.local` 파일을 생성하세요.

```bash
# API 엔드포인트 (기본값)
NEXT_PUBLIC_API_BASE_URL=https://recruit.paysbypays.com/api/v1
```

### 개발 서버 실행

```bash
npm run dev
```

브라우저에서 [http://localhost:3000](http://localhost:3000)을 열어 확인하세요.

### 프로덕션 빌드

```bash
# 빌드
npm run build

# 프로덕션 서버 실행
npm start
```

---

## 프로젝트 구조

```
dashboard/
├── src/
│   ├── app/                    # Next.js App Router 페이지
│   │   ├── page.tsx            # 대시보드 홈
│   │   ├── transactions/       # 거래 내역
│   │   │   ├── page.tsx        # 거래 목록
│   │   │   ├── [id]/page.tsx   # 거래 상세
│   │   │   └── components/     # 거래 관련 컴포넌트
│   │   ├── merchants/          # 가맹점 관리
│   │   │   ├── page.tsx        # 가맹점 목록
│   │   │   ├── [mchtCode]/     # 가맹점 상세
│   │   │   └── new/            # 가맹점 등록
│   │   ├── settlements/        # 정산
│   │   ├── analytics/          # 분석
│   │   ├── settings/           # 설정
│   │   ├── system-health/      # 시스템 상태
│   │   └── api/                # API 라우트
│   │       ├── proxy/          # CORS 프록시
│   │       └── translations/    # 번역 API
│   │
│   ├── components/             # 재사용 가능한 컴포넌트
│   │   ├── analytics/          # 분석 관련
│   │   ├── badges/             # 뱃지 컴포넌트
│   │   ├── charts/             # 차트 컴포넌트
│   │   ├── dashboard/          # 대시보드 위젯
│   │   ├── health/             # 시스템 헬스
│   │   ├── layout/             # 레이아웃 컴포넌트
│   │   ├── merchants/          # 가맹점 관련
│   │   ├── settlements/        # 정산 관련
│   │   ├── transactions/       # 거래 관련
│   │   └── ...
│   │
│   ├── hooks/                  # 커스텀 훅 (12개)
│   │   ├── useTransactions.ts
│   │   ├── useMerchants.ts
│   │   ├── useSettlements.ts
│   │   ├── useHealthMonitoring.ts
│   │   ├── useDisplayFormat.ts
│   │   └── ...
│   │
│   ├── store/                  # Zustand 스토어 (4개)
│   │   ├── preferences-store.ts
│   │   ├── filter-store.ts
│   │   ├── health-store.ts
│   │   └── ui-store.ts
│   │
│   ├── lib/                    # 유틸리티 및 설정
│   │   ├── api/                # API 클라이언트
│   │   └── i18n-config.ts      # i18n 설정
│   │
│   ├── data/                   # Mock 데이터 및 데이터 변환
│   │   ├── settlements.ts      # 정산 데이터 변환 로직
│   │   ├── pay-types.ts        # 결제 수단 매핑
│   │   └── ...
│   │
│   └── types/                  # TypeScript 타입
│
├── translations/               # 번역 파일
│   ├── ko/                     # 한국어
│   ├── en/                     # 영어
│   └── ja/                     # 일본어
│
└── docs/                       # 문서
    ├── ARCHITECTURE.md         # 아키텍처 문서
    ├── FEATURES.md             # 기능 설명
    ├── DEVELOPMENT.md          # 개발 진행 및 결과
    ├── PACKAGES.md             # 자체 개발 패키지 사용 현황
    └── ...
```

자세한 구조는 [ARCHITECTURE.md](./docs/ARCHITECTURE.md)를 참조하세요.

---

## 주요 페이지

### 대시보드 홈 (`/`)
핵심 지표, 거래 트렌드, 최근 거래 내역, 시스템 상태를 한눈에 확인할 수 있는 메인 대시보드입니다.

### 거래 내역 (`/transactions`)
모든 거래 내역을 필터링, 정렬, 검색하여 조회할 수 있습니다. 거래 상세 정보는 Drawer로 표시됩니다.

### 가맹점 관리 (`/merchants`)
가맹점 목록 조회, 상세 정보 확인, 가맹점 등록 기능을 제공합니다.

### 정산 (`/settlements`)
정산 통계, 타임라인 차트, 내역을 확인할 수 있습니다. 실제 거래 데이터와 Mock 데이터가 자동 병합됩니다.

### 분석 (`/analytics`)
거래 데이터를 다양한 관점에서 분석하고 통계를 확인할 수 있습니다.

### 시스템 상태 (`/system-health`)
시스템 상태 모니터링 및 API 그룹별 상태를 확인할 수 있습니다. 30초 간격 자동 폴링을 지원합니다.

### 설정 (`/settings`)
테마, 언어, 날짜 형식, 통화, 접근성 옵션을 설정할 수 있습니다. 설정은 localStorage에 자동 저장됩니다.

자세한 기능 설명은 [FEATURES.md](./docs/FEATURES.md)를 참조하세요.

---

## 개발 현황

### 완료된 기능

- ✅ **Phase 1 (필수 기능)**: 100% 완료
  - 대시보드 홈 페이지
  - 거래 내역 리스트 페이지
  - 기본 레이아웃

- ✅ **Phase 2 (향상 기능)**: 100% 완료
  - 거래 상세 Drawer
  - 가맹점 리스트 & 상세
  - 분석/통계 페이지
  - 정산 페이지
  - 설정 페이지
  - 시스템 상태 페이지

- ✅ **Phase 3 (추가 기능)**: 100% 완료
  - 가맹점 등록 페이지 ✅
  - 데이터 내보내기 ✅
  - 실시간 알림 시스템 ✅
  - 성능 최적화 ✅
  - 접근성 개선 ✅

### 리팩토링 결과

- **평균 코드 감소율**: 약 60%
- **재사용 가능한 컴포넌트**: 50+ 개
- **커스텀 훅**: 12개
- **Zustand 스토어**: 4개

자세한 개발 진행 내역은 [DEVELOPMENT.md](./docs/DEVELOPMENT.md)를 참조하세요.

---

## 문서

프로젝트의 상세한 문서는 `docs/` 디렉토리에서 확인할 수 있습니다.

- **[ARCHITECTURE.md](./docs/ARCHITECTURE.md)**: 아키텍처 및 기술 스택 상세 설명
- **[FEATURES.md](./docs/FEATURES.md)**: 각 페이지 및 기능 상세 설명
- **[DEVELOPMENT.md](./docs/DEVELOPMENT.md)**: 개발 진행 내역 및 결과
- **[PACKAGES.md](./docs/PACKAGES.md)**: 자체 개발 패키지 사용 현황

---

## 주요 기술적 특징

### 아키텍처
- **모듈화된 컴포넌트 구조**: 재사용 가능한 컴포넌트로 구성
- **커스텀 훅 패턴**: 비즈니스 로직을 훅으로 분리
- **Zustand 상태 관리**: 경량 상태 관리 라이브러리 사용
- **타입 안전성**: TypeScript로 엄격한 타입 체크
- **자체 개발 패키지**: @hua-labs/ui, @hua-labs/i18n-core 사용

### 성능 최적화
- **코드 스플리팅**: 페이지별 자동 코드 스플리팅
- **상태 관리 최적화**: `useShallow`를 통한 불필요한 리렌더링 방지
- **번역 로딩**: 비동기 번역 로딩으로 초기 로딩 시간 단축
- **메모이제이션**: `useMemo`, `useCallback`을 통한 계산 결과 캐싱

### 사용자 경험
- **다국어 지원**: 3개 언어 지원 (한국어, 영어, 일본어)
- **다크 모드**: 라이트/다크/시스템 설정 지원
- **반응형 디자인**: 모바일, 태블릿, 데스크톱 지원
- **실시간 알림**: 시스템 상태, 실패율, 정산 지연 알림
- **데이터 내보내기**: Excel/CSV 형식 지원

---

## API 연동

### API 엔드포인트

프로젝트는 `https://recruit.paysbypays.com/api/v1` API를 사용합니다.

### CORS 해결

Next.js API 프록시 (`/api/proxy/[...path]`)를 통해 CORS 문제를 해결했습니다.

### 주요 API

- **거래 내역**: `/payments/list`
- **가맹점**: `/merchants/list`, `/merchants/details/{mchtCode}`
- **공통 코드**: `/common/payment-status/all`, `/common/paymemt-type/all`
- **헬스 체크**: `/health`

자세한 API 구조는 `src/lib/api/client.ts`를 참조하세요.

---

## 라이선스

이 프로젝트는 과제용 프로젝트입니다.

---

## 템플릿/라이브러리 사용 노트

### 자체 개발 패키지

이 프로젝트는 자체 개발한 두 개의 로컬 패키지를 사용합니다:

1. **@hua-labs/ui** (버전 1.0.0)
   - **출처**: 자체 개발 (로컬 패키지)
   - **용도**: 재사용 가능한 UI 컴포넌트 라이브러리
   - **주요 컴포넌트**: `StatsPanel`, `Pagination`, `Drawer`, `Icon`, `Skeleton` 등
   - **사용 파일 수**: 43개
   - **설치 방법**: 로컬 tarball (`hua-labs-ui-1.0.0.tgz`)
   - **상태**: 그대로 사용 (커스터마이즈 없음)

2. **@hua-labs/i18n-core** (버전 1.0.0)
   - **출처**: 자체 개발 (로컬 패키지)
   - **용도**: 국제화(i18n) 코어 라이브러리
   - **주요 기능**: `useTranslation`, `useLanguageChange`, `createCoreI18n`
   - **사용 파일 수**: 33개
   - **설치 방법**: 로컬 tarball (`hua-labs-i18n-core-1.0.0.tgz`)
   - **상태**: 그대로 사용 (커스터마이즈 없음)

자세한 사용 현황은 [PACKAGES.md](./docs/PACKAGES.md)를 참조하세요.

### 외부 라이브러리

- **Recharts 3.5.0**
  - **출처**: [Recharts 공식 사이트](https://recharts.org/)
  - **패키지명**: `recharts`
  - **용도**: 데이터 시각화 차트 라이브러리
  - **사용 상태**: 커스터마이즈 (커스텀 색상 및 스타일 적용)
  
- **exceljs 4.4.0**
  - **출처**: [ExcelJS GitHub](https://github.com/exceljs/exceljs)
  - **패키지명**: `exceljs`
  - **용도**: Excel 파일 내보내기 기능
  - **사용 상태**: 그대로 사용 (커스터마이즈 없음)
  
- **zustand 5.0.8**
  - **출처**: [Zustand 공식 사이트](https://zustand-demo.pmnd.rs/)
  - **패키지명**: `zustand`
  - **용도**: 상태 관리 라이브러리
  - **사용 상태**: 그대로 사용 (커스터마이즈 없음)
  
- **Pretendard 1.3.9**
  - **출처**: [Pretendard GitHub](https://github.com/orioncactus/pretendard)
  - **패키지명**: `pretendard`
  - **용도**: 한국어 최적화 웹폰트
  - **사용 상태**: 그대로 사용 (커스터마이즈 없음)
  
- **Tailwind CSS 4.x**
  - **출처**: [Tailwind CSS 공식 사이트](https://tailwindcss.com/)
  - **패키지명**: `tailwindcss`
  - **용도**: 유틸리티 기반 CSS 프레임워크
  - **사용 상태**: 커스터마이즈 (커스텀 CSS 변수 및 테마 설정)

---

## 디자인 노트

### 디자인 의도
결제대행사 운영팀을 위한 직관적이고 효율적인 대시보드 인터페이스를 제공합니다. 명확한 정보 계층 구조와 빠른 데이터 접근을 우선시하며, 운영자가 핵심 지표를 한눈에 파악하고 필요한 정보에 빠르게 접근할 수 있도록 설계했습니다.

### 주요 UI/UX 포인트
- **카드 기반 레이아웃**: 정보를 카드 단위로 구분하여 가독성 향상 및 시각적 계층 구조 명확화
- **일관된 디자인 시스템**: 모든 페이지에서 동일한 컴포넌트 및 스타일 사용으로 사용자 학습 곡선 최소화
- **반응형 디자인**: 모바일, 태블릿, 데스크톱에서 최적화된 레이아웃으로 다양한 환경에서 사용 가능
- **실시간 피드백**: 알림, 로딩 상태, 에러 메시지를 통한 명확한 사용자 피드백

---

**최종 업데이트**: 2025-11-28 
**버전**: 1.0  
